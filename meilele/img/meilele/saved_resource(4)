"use strict";$.saleNumUpdate=function(t,e){return new $.saleNumUpdate.prototype.init(t,e)},$.saleNumUpdate.prototype={constructor:$.saleNumUpdate,defaultSetting:{type:"sale_num",param:"id",selector:".JS_sale_num_ajax",key:"num"},init:function init(t,e){!t instanceof Array&&(t=[t]);var i=this;this.type=[],this.formatDomList={},this.goodsIdString={},this.setting={},this.callback=e,$.each(t,function(){var t=$(this.selector),a=[],n={};t.each(function(t,e){var i=$(this),s=i.data("goods_id");$.isNumeric(s)&&(n[s]?$.merge(n[s],i):(n[s]=$.merge($(),i),a.push(s)))}),i.type.push(this.type),i.formatDomList[this.type]=n,0<a.length&&(i.goodsIdString[this.type]="_"+a.join("_")+"_",i.flag=!0),(i.setting[this.type]=this).isInt&&(i.setting.isInt=1)}),this.flag&&this.start()},start:function start(){var n=this,i={type:this.type.join("*")};if($.each(this.type,function(t,e){i[n.setting[e].param]=n.goodsIdString[e]}),i.price_id&&delete i.price_id,i.id)for(var t=i.id.split("_"),e=[],s=0;s<t.length;s++)0<parseInt(t[s])&&e.push(parseInt(t[s]).toString(36));e&&e.length&&(i.id="_"+e.join("_"),i.ids=i.id,delete i.id,this.setting.isInt&&(i.isInt=this.setting.isInt),$.ajax({url:"/dubbo_api/realtimeSite/get?n=1",type:"get",data:i,dataType:"json",cache:!0,success:function(i){i&&0==i.error&&i.result&&($.each(n.type,function(t,e){var s=n.setting[e].key,a=n.formatDomList[e];i.result[e]&&$.each(i.result[e],function(){var t=this.goods_id,e=this[s],i=a[t];i&&i.length&&e&&i.html(e)})}),n.callback&&"function"==typeof n.callback&&n.callback(i))}}))}},$.saleNumUpdate.prototype.init.prototype=$.saleNumUpdate.prototype;
/*nielinying*290918:2019-03-07 18:11:59*/"use strict";var AutoPlay=function AutoPlay(){this.initialize()};function activeFloorSlide(){var t=$(".content_goods"),i=t.find(".goods_item_list"),e=i.find(".goods_item"),n=t.find(".goods_pagination .prev"),s=t.find(".goods_pagination .next"),o=!1;$(".index_active_floor .content_fill_link1 img").on("load",function(){$(".index_active_floor .more_link").show().css("top",$(".index_active_floor .content_fill_link1").height()/2+"px")}),$(".index_active_floor .more_link").show().css("top",$(".index_active_floor .content_fill_link1").height()/2+"px"),5<e.length&&($(".content_goods .goods_pagination").show(),n.on("click",function(){o||(o=!0,i.prepend(i.find(".goods_item").slice(-5)).css({marginLeft:5*-e.outerWidth()+"px"}),i.animate({marginLeft:"0px"},function(){o=!1}))}),s.on("click",function(){o||(o=!0,i.animate({marginLeft:5*-e.outerWidth()+"px"},function(){o=!1,i.append(i.find(".goods_item").slice(0,5)).css({marginLeft:0})}))}))}function getFloorTop(){for(var t=[],i=$("#jsIndexData .jsFloor"),e=0;e<i.length;e++){var n=$(i[e]).offset().top;t.push(n-100)}return t}function stairs_show(){document.body.clientWidth-1200<90?jQuery("#JS_default_stairs").addClass("none"):jQuery("#JS_default_stairs").removeClass("none")}function stairs_move(){var a=$("#JS_default_stairs"),r=a.find("a"),l=$("#jsIndexData .jsFloor").eq(0).offset().top-276,c=getFloorTop(),d=c.length;$(window).on("scroll",function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;a.removeClass("out"),l<=t?(-[1]?a.css({transform:"scale(1)",opacity:1}):a.show(),a.find(".stairs-cover").addClass("none"),stairs_show()):(-[1]?a.css({transform:"scale(1.2)",opacity:0}):a.hide(),a.find(".stairs-cover").removeClass("none"));for(var i=0,e=0;e<d;e++){var n=c[e]-40*(e+1),s=c[e+1]-40*(e+2);d<=e+1&&(s=$("#jsIndexData .jsNoFloor").eq(0).offset().top-40*(e+3)),n<=t&&t<s&&(i=e),s<t&&(i=d-1)}if(r.each(function(){jQuery(this).removeClass("current")}),-1<i&&i<11)if(i<1)r.eq(0).addClass("current");else{var o=i;r.eq(o).addClass("current")}}),a.on("mouseover","a",function(){jQuery(this).addClass("hover")}).on("mouseout","a",function(){jQuery(this).removeClass("hover")}).on("click","a",function(){var t=$(this).index();window.scroll(0,c[t])})}function search_move(){jQuery(window).on("scroll",function(){658<=(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0)?jQuery("#jsSearchComponent").addClass("search-fixed"):jQuery("#jsSearchComponent").removeClass("search-fixed")})}AutoPlay.prototype={initialize:function initialize(){var t=this;this.oBox=$("#JS_mll_scroll_bar"),this.oUl=$("ul.scroll-content"),this.oLi=$("#JS_mll_scroll_bar .scroll-item"),this.obImg=$(".sc-big"),this.osImg=$(".sc-small"),this.timer=null,this.autoTimer=null,this.iNow=0,this.aBtn=$(".scroll-btn span"),this.toggle(),this.lock=!1,this.autoTimer=setInterval(function(){t.lock||t.next()},4e3),this.oBox.mouseenter(function(){t.lock=!0,clearInterval(t.autoTimer)}),this.oBox.mouseleave(function(){t.autoTimer=setInterval(function(){t.next()},4e3)});for(var i=0;i<this.aBtn.length;i++)this.aBtn[i].index=i,this.aBtn[i].onmouseover=function(){this.index!=t.iNow&&(t.iNow=this.index,t.toggle())}},toggle:function toggle(){for(var t=0;t<this.aBtn.length;t++)this.aBtn[t].className="";this.aBtn[this.iNow].className="current",this.lazy(this.iNow),this.doShow(this.iNow)},next:function next(){this.iNow++,this.iNow==this.aBtn.length&&(this.iNow=0),this.toggle()},lazy:function lazy(t){var i=this.oLi.eq(t);i.data("imgLoaded")||(i.find("img").each(function(){jQuery(this).prop("src",$(this).attr("lazy-src")).removeAttr("lazy-src")}),i.data("imgLoaded",1))},doShow:function doShow(t){var i=this;i.oLi.addClass("none"),i.oLi.fadeOut(500),i.oLi.eq(t).fadeIn(500)}};var GoodsSlide=function GoodsSlide(t){this.init(t)};function ExprSlide(){$("#jsExprList");var e=$("#jsExprList .expr-list"),n=$("#jsExprList .expr-list .expr-item"),t=$("#jsExprList .expr-btn .pre"),i=$("#jsExprList .expr-btn .next"),s=!1;t.click(function(){if(s)return!1;s=!0,e.prepend(e.find(".expr-item").slice(-4)).css({marginLeft:4*-n.outerWidth()+"px"}),e.animate({marginLeft:"-20px"},function(){s=!1}),$("#jsExprList .expr-list .expr-item").removeClass("hover"),$("#jsExprBtn .img-list").removeClass("hover"),_gaq.push(["_trackEvent","2018版首页","点击底部体验馆左右切换按钮","click"]),_ana.push(["trackEvent","2018版首页","点击底部体验馆左右切换按钮","click"])}),i.click(function(){if(s)return!1;s=!0,e.animate({marginLeft:4*-n.outerWidth()+"px"},function(){s=!1,e.append(e.find(".expr-item").slice(0,4)).css({marginLeft:"-20px"})}),$("#jsExprList .expr-list .expr-item").removeClass("hover"),$("#jsExprBtn .img-list").removeClass("hover"),_gaq.push(["_trackEvent","2018版首页","点击底部体验馆左右切换按钮","click"]),_ana.push(["trackEvent","2018版首页","点击底部体验馆左右切换按钮","click"])}),$("#jsExprBtn a i").click(function(){var t=$(this).closest(".img-list").index(),i=t-1;if(s)return!1;s=!0,$("#jsExprList .expr-list .expr-item").removeClass("hover"),$("#jsExprBtn .img-list").removeClass("hover"),$("#jsExprList .expr-list .expr-item").each(function(){$(this).data("index")==t+1&&($(this).addClass("hover"),i=$(this).index()-1)}),$("#jsExprBtn .img-list").eq(t).addClass("hover"),e.animate({marginLeft:-n.outerWidth()*i+"px"},function(){s=!1,e.append(e.find(".expr-item").slice(0,i)).css({marginLeft:"-20px"})}),_gaq.push(["_trackEvent","2018版首页","点击底部体验馆名字","click"]),_ana.push(["trackEvent","2018版首页","点击底部体验馆名字","click"])})}function activeFloorSlide(){var t=$(".content_goods"),i=t.find(".goods_item_list"),e=i.find(".goods_item"),n=t.find(".goods_pagination .prev"),s=t.find(".goods_pagination .next"),o=!1;$(".index_active_floor .content_fill_link1 img").on("load",function(){$(".index_active_floor .more_link").show().css("top",$(".index_active_floor .content_fill_link1").height()/2+"px")}),$(".index_active_floor .more_link").show().css("top",$(".index_active_floor .content_fill_link1").height()/2+"px"),5<e.length&&($(".content_goods .goods_pagination").show(),n.on("click",function(){o||(o=!0,i.prepend(i.find(".goods_item").slice(-5)).css({marginLeft:5*-e.outerWidth()+"px"}),i.animate({marginLeft:"0px"},function(){o=!1}))}),s.on("click",function(){o||(o=!0,i.animate({marginLeft:5*-e.outerWidth()+"px"},function(){o=!1,i.append(i.find(".goods_item").slice(0,5)).css({marginLeft:0})}))}))}function randomImg(){var t=[1,2,3,4,5,6,7,8,9,10],i=$("#jsImgItem1").length,e=$("#jsImgItem2").length;t.sort(function(){return.5-Math.random()}),0<i&&$("#jsImgItem1").attr("src",$.__RES+"/mll/mpg/index/i/"+t[0]+".jpg"),0<e&&$("#jsImgItem2").attr("src",$.__RES+"/mll/mpg/index/i/"+(0<i?t[1]:t[0])+".jpg")}function sellNum(t){$.ajax({url:"/mll_api/api/banjiatuan_num",type:"get",dataType:"json",data:{goods_id:t.join(",")},success:function(t){if(0===t.error)for(var i=0;i<t.result.length;i++){var e=t.result[i].h_buy_rate.replace(/%/,""),n=$("#J-half-price-group li.product_"+t.result[i].goods_id);100==e&&(n.hasClass("residueTime")||n.addClass("residueNum"))}}})}function halfPriceGroup(){$.ajax({url:"/mll_api/api/banjiatuan_index",type:"get",dataType:"json",success:function(t){if(0===t.error){for(var i=[],e=t.result.list,n=[],s=0;s<e.length;s++){n.push(e[s].goods_id);var o="";e[s].end_time-t.result.time<=0&&(o="residueTime");var a='<li class="'+o+" product_"+e[s].goods_id+'"><a href="'+e[s].url_index+"?from=index_halfprice\" onclick=\"window._gaq.push(['_trackEvent','2016版首页','click','半价团商品']);_ana.push(['trackEvent', '2016版首页', 'click', '半价团商品']);\" class=\"pic\" target=\"_blank\"><img src=\""+$.__IMG+"/"+e[s].src+'" alt="" width="100%" height="100%"></a><div class="info"><a href="'+e[s].url_index+"?from=index_halfprice\" class=\"pro-name\" onclick=\"window._gaq.push(['_trackEvent','2016版首页','click','半价团商品']);_ana.push(['trackEvent', '2016版首页', 'click', '半价团商品']);\" title=\""+e[s].goods_name_index+'" target="_blank">'+e[s].goods_name_index+'</a><div class="price clearfix"><p class="new-price Left"><span class="code">&yen;</span><span class="num">'+e[s].group_price+'</span></p><p class="old-price Left"><span class="code">&yen;</span><span class="num">'+e[s].shop_price+'</span></p></div></div><a href="'+e[s].goods_url+'?from=index_halfprice" target="_blank" class="pic-icon"><span class="pic"></span></a>';a+="</li>",i.push(a)}var r='<li class="last"><a href="'+t.result.set_url+"?from=index_halfprice\" onclick=\"window._gaq.push(['_trackEvent','2016版首页','click','团购首页']);_ana.push(['trackEvent', '2016版首页', 'click', '团购首页']);\" target=\"_blank\"><img src=\""+$.__IMG+"/"+t.result.set_pic+'" alt="" width="100%" height="100%"></a></li>';i.push(r),$("#J-half-price-group .half-price-list ul").append(i.join("")),sellNum(n)}}})}GoodsSlide.prototype={init:function init(t){var i=this;this.oBox=$("#jsLayerList .jsFloor").eq(t),this.oUl=$("#jsLayerList .jsFloor").eq(t).find(".classify-detail"),this.oLi=$("#jsLayerList .jsFloor").eq(t).find(" .classify-detail li"),this.len=this.oLi.length,this.timer=null,this.autoTimer=null,this.iNow=0,this.aBtn=$("#jsLayerList .jsFloor").eq(t).find(" .classify-btn .btn"),this.toggle(),this.lock=!1,1<this.len&&(i.autoTimer=setInterval(function(){i.lock||i.next()},4e3)),this.oBox.mouseenter(function(){i.lock=!0,clearInterval(i.autoTimer)}),this.oBox.mouseleave(function(){i.autoTimer=setInterval(function(){i.next()},4e3)});for(var e=0;e<this.aBtn.length;e++)this.aBtn[e].index=e,this.aBtn[e].onmouseover=function(){this.index!=i.iNow&&(i.iNow=this.index,i.toggle())}},toggle:function toggle(){for(var t=0;t<this.aBtn.length;t++)this.aBtn[t].className="btn";this.aBtn[this.iNow].className="current btn",this.lazy(this.iNow),this.doShow(this.iNow)},next:function next(){this.iNow++,this.iNow==this.aBtn.length&&(this.iNow=0),this.toggle()},lazy:function lazy(t){var i=this.oLi.eq(t);i.data("imgLoaded")||(i.find("img").each(function(){jQuery(this).prop("src",$(this).attr("lazy-src")).removeAttr("lazy-src")}),i.data("imgLoaded",1))},doShow:function doShow(t){var i=this;i.oLi.addClass("none"),i.oLi.fadeOut(500),i.oLi.eq(t).fadeIn(500)}},$.lazyImg.start("scroll"),$("img").load(function(){$(this).animate({opacity:"1"},200)}),$(document).ready(function(){$("#jsHeaderCatModel").unbind(),new AutoPlay,stairs_move(),search_move(),$.saleNumUpdate&&$.saleNumUpdate([{selector:".JS_async_price",type:"price",param:"id",key:"show_price",isInt:!0}]);for(var t=0;t<$("#jsLayerList .jsFloor").length;t++)new GoodsSlide(t);activeFloorSlide(),ExprSlide(),$("#jsPopularBrand .brand-box").hover(function(){$(this).find(".mask-box").removeClass("none")},function(){$(this).find(".mask-box").addClass("none")}),$("#jsExprList ul li").hover(function(){$(this).hasClass("img-item")||$(this).addClass("hover")},function(){$(this).hasClass("img-item")||$(this).removeClass("hover")}),randomImg(),$("#jsHeaderCart").on("mouseenter",function(){_gaq.push(["_trackEvent","2018版首页","鼠标移入购物车区域","onMouseOver"]),_ana.push(["trackEvent","2018版首页","鼠标移入购物车区域","onMouseOver"])}),$("#jsHeaderSearchBtn").click(function(){$("#jsSearchComponent").hasClass("search-fixed")?(_gaq.push(["_trackEvent","2018版首页","悬浮栏点击搜索按钮","click"]),_ana.push(["trackEvent","2018版首页","悬浮栏点击搜索按钮","click"])):(_gaq.push(["_trackEvent","2018版首页","点击导航头部搜索按钮","click"]),_ana.push(["trackEvent","2018版首页","点击导航头部搜索按钮","click"])),$("#jsHeaderSearchForm").submit()}),$("#jsHeaderSearchInput").on("click",function(){$("#jsSearchComponent").hasClass("search-fixed")||(_gaq.push(["_trackEvent","2018版首页","点击导航头部搜索框","click"]),_ana.push(["trackEvent","2018版首页","点击导航头部搜索框","click"]))}).on("input",function(){$("#jsSearchComponent").hasClass("search-fixed")&&(_gaq.push(["_trackEvent","2018版首页","悬浮搜索框输入文字","click"]),_ana.push(["trackEvent","2018版首页","悬浮搜索框输入文字","click"]))})}),0<$("#J-half-price-group").length&&halfPriceGroup();
/*jinzeze*291998:2019-04-12 17:40:46*/